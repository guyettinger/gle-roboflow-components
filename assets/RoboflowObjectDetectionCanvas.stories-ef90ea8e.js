import{s as A,j as h}from"./styled-components.browser.esm-5c00f201.js";import{r as w}from"./index-76fb7be0.js";import"./_commonjsHelpers-de833af9.js";const M=A.canvas`
  position: absolute;
  top: 0;
  left: 0;
`,m=({width:i,height:y,objectDetections:D,mirrored:W=!1})=>{const o=w.useRef(null);w.useEffect(()=>{const r=o==null?void 0:o.current;if(!r)return;q(i,y);const e=r.getContext("2d");e&&V(D,e)},[i,y,D]);const q=(r,e)=>{const l=o==null?void 0:o.current;if(!l)return;l.width=r*window.devicePixelRatio,l.height=e*window.devicePixelRatio,l.style.width=r+"px",l.style.height=e+"px";const t=l.getContext("2d");t&&t.scale(window.devicePixelRatio,window.devicePixelRatio)},V=(r,e)=>{const l=o==null?void 0:o.current;l&&(e.clearRect(0,0,l.width,l.height),r.forEach(t=>{let u=t.bbox;if(u.class=t.class,u.color=t.color,u.confidence=t.confidence,t=u,t.confidence<0)return;W&&(t.x=i-t.x);let c=t.x-t.width/2,s=t.y-t.height/2,p=t.width,b=t.height;e.beginPath(),e.lineWidth=1,e.strokeStyle=t.color,e.rect(c,s,p,b),e.stroke(),e.fillStyle="black",e.globalAlpha=.2,e.fillRect(c,s,p,b),e.globalAlpha=1;let x="black",j=12;e.font=`${j}px monospace`,e.textAlign="center";let F=t.class,g=(t.confidence*100).toFixed().toString()+"%",S=F+" "+g;const n=j;let d=e.measureText(S).width;n<=b&&d<=p?(e.strokeStyle=t.color,e.fillStyle=t.color,e.fillRect(c-e.lineWidth/2,s-n-e.lineWidth,d+2,n+1),e.stroke(),e.fillStyle=x,e.fillText(S,c+d/2+1,s-1)):(d=e.measureText(g).width,e.strokeStyle=t.color,e.fillStyle=t.color,e.fillRect(c-e.lineWidth/2,s-n-e.lineWidth,d+2,n+1),e.stroke(),e.fillStyle=x,e.fillText(g,c+d/2+1,s-1))}))};return h(M,{ref:o})};try{m.displayName="RoboflowObjectDetectionCanvas",m.__docgenInfo={description:"",displayName:"RoboflowObjectDetectionCanvas",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},objectDetections:{defaultValue:null,description:"",name:"objectDetections",required:!0,type:{name:"RoboflowObjectDetection[]"}},mirrored:{defaultValue:{value:"false"},description:"",name:"mirrored",required:!1,type:{name:"boolean"}}}}}catch{}const H={component:m,title:"gle-roboflow-components/RoboflowObjectDetectionCanvas",argTypes:{}},N=A.div`
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  margin: 1rem 0;
  canvas {
    position: relative;
    background-color: #1D1E20;
  }
`,P=i=>h(N,{children:h(m,{...i})}),a=i=>h(P,{...i});a.args={width:640,height:480,objectDetections:[{class:"Quarter",confidence:.8812620043754578,bbox:{x:310.87411880493164,y:310.65998554229736,width:112.44983673095703,height:78.8657283782959},color:"#F4004E"},{class:"Dime",confidence:.8412563800811768,bbox:{x:229.80114936828613,y:124.92026925086975,width:34.812564849853516,height:46.48133039474487},color:"#4892EA"},{class:"Dime",confidence:.7248507142066956,bbox:{x:67.95018196105957,y:443.4764528274536,width:25.294513702392578,height:24.552812576293945},color:"#4892EA"}]};const f=i=>h(P,{...i});f.args={mirrored:!0,width:640,height:480,objectDetections:[{class:"Quarter",confidence:.8812620043754578,bbox:{x:310.87411880493164,y:310.65998554229736,width:112.44983673095703,height:78.8657283782959},color:"#F4004E"},{class:"Dime",confidence:.8412563800811768,bbox:{x:229.80114936828613,y:124.92026925086975,width:34.812564849853516,height:46.48133039474487},color:"#4892EA"},{class:"Dime",confidence:.7248507142066956,bbox:{x:67.95018196105957,y:443.4764528274536,width:25.294513702392578,height:24.552812576293945},color:"#4892EA"}]};var E,R,T;a.parameters={...a.parameters,docs:{...(E=a.parameters)==null?void 0:E.docs,source:{originalSource:"(args: RoboflowObjectDetectionCanvasProps) => <StoryTemplate {...args} />",...(T=(R=a.parameters)==null?void 0:R.docs)==null?void 0:T.source}}};var _,k,O;f.parameters={...f.parameters,docs:{...(_=f.parameters)==null?void 0:_.docs,source:{originalSource:"(args: RoboflowObjectDetectionCanvasProps) => <StoryTemplate {...args} />",...(O=(k=f.parameters)==null?void 0:k.docs)==null?void 0:O.source}}};const I=["Default","Mirrored"];export{a as Default,f as Mirrored,I as __namedExportsOrder,H as default};
//# sourceMappingURL=RoboflowObjectDetectionCanvas.stories-ef90ea8e.js.map
