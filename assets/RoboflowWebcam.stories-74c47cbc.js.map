{"version":3,"file":"RoboflowWebcam.stories-74c47cbc.js","sources":["../../node_modules/react-webcam/dist/react-webcam.js","../../node_modules/styled-breakpoints/use-media-query/get-matches/get-matches.js","../../node_modules/styled-breakpoints/use-media-query/get-matches/index.js","../../node_modules/styled-breakpoints/use-media-query/use-media-query/use-media-query.js","../../node_modules/styled-breakpoints/use-media-query/use-media-query/index.js","../../node_modules/styled-breakpoints/use-media-query/index.js","../../src/hooks/ActiveBreakpoints/ActiveBreakpoints.tsx","../../src/hooks/UseForwardedRef/UseForwardedRef.tsx","../../src/services/async/asyncService.ts","../../src/services/mediaDevice/mediaDeviceService.types.ts","../../src/services/mediaDevice/mediaDeviceService.ts","../../src/components/RoboflowWebcam/RoboflowWebcam.tsx"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Webcam\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"Webcam\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_react__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/react-webcam.tsx\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/react-webcam.tsx\":\n/*!******************************!*\\\n  !*** ./src/react-webcam.tsx ***!\n  \\******************************/\n/*! exports provided: default */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (undefined && undefined.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n\n// polyfill based on https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n(function polyfillGetUserMedia() {\n    if (typeof window === 'undefined') {\n        return;\n    }\n    // Older browsers might not implement mediaDevices at all, so we set an empty object first\n    if (navigator.mediaDevices === undefined) {\n        navigator.mediaDevices = {};\n    }\n    // Some browsers partially implement mediaDevices. We can't just assign an object\n    // with getUserMedia as it would overwrite existing properties.\n    // Here, we will just add the getUserMedia property if it's missing.\n    if (navigator.mediaDevices.getUserMedia === undefined) {\n        navigator.mediaDevices.getUserMedia = function (constraints) {\n            // First get ahold of the legacy getUserMedia, if present\n            var getUserMedia = navigator.getUserMedia ||\n                navigator.webkitGetUserMedia ||\n                navigator.mozGetUserMedia ||\n                navigator.msGetUserMedia;\n            // Some browsers just don't implement it - return a rejected promise with an error\n            // to keep a consistent interface\n            if (!getUserMedia) {\n                return Promise.reject(new Error(\"getUserMedia is not implemented in this browser\"));\n            }\n            // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n            return new Promise(function (resolve, reject) {\n                getUserMedia.call(navigator, constraints, resolve, reject);\n            });\n        };\n    }\n})();\nfunction hasGetUserMedia() {\n    return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n}\nvar Webcam = /** @class */ (function (_super) {\n    __extends(Webcam, _super);\n    function Webcam(props) {\n        var _this = _super.call(this, props) || this;\n        _this.canvas = null;\n        _this.ctx = null;\n        _this.requestUserMediaId = 0;\n        _this.unmounted = false;\n        _this.state = {\n            hasUserMedia: false\n        };\n        return _this;\n    }\n    Webcam.prototype.componentDidMount = function () {\n        var _a = this, state = _a.state, props = _a.props;\n        this.unmounted = false;\n        if (!hasGetUserMedia()) {\n            props.onUserMediaError(\"getUserMedia not supported\");\n            return;\n        }\n        if (!state.hasUserMedia) {\n            this.requestUserMedia();\n        }\n        if (props.children && typeof props.children != 'function') {\n            console.warn(\"children must be a function\");\n        }\n    };\n    Webcam.prototype.componentDidUpdate = function (nextProps) {\n        var props = this.props;\n        if (!hasGetUserMedia()) {\n            props.onUserMediaError(\"getUserMedia not supported\");\n            return;\n        }\n        var audioConstraintsChanged = JSON.stringify(nextProps.audioConstraints) !==\n            JSON.stringify(props.audioConstraints);\n        var videoConstraintsChanged = JSON.stringify(nextProps.videoConstraints) !==\n            JSON.stringify(props.videoConstraints);\n        var minScreenshotWidthChanged = nextProps.minScreenshotWidth !== props.minScreenshotWidth;\n        var minScreenshotHeightChanged = nextProps.minScreenshotHeight !== props.minScreenshotHeight;\n        if (videoConstraintsChanged ||\n            minScreenshotWidthChanged ||\n            minScreenshotHeightChanged) {\n            this.canvas = null;\n            this.ctx = null;\n        }\n        if (audioConstraintsChanged || videoConstraintsChanged) {\n            this.stopAndCleanup();\n            this.requestUserMedia();\n        }\n    };\n    Webcam.prototype.componentWillUnmount = function () {\n        this.unmounted = true;\n        this.stopAndCleanup();\n    };\n    Webcam.stopMediaStream = function (stream) {\n        if (stream) {\n            if (stream.getVideoTracks && stream.getAudioTracks) {\n                stream.getVideoTracks().map(function (track) {\n                    stream.removeTrack(track);\n                    track.stop();\n                });\n                stream.getAudioTracks().map(function (track) {\n                    stream.removeTrack(track);\n                    track.stop();\n                });\n            }\n            else {\n                stream.stop();\n            }\n        }\n    };\n    Webcam.prototype.stopAndCleanup = function () {\n        var state = this.state;\n        if (state.hasUserMedia) {\n            Webcam.stopMediaStream(this.stream);\n            if (state.src) {\n                window.URL.revokeObjectURL(state.src);\n            }\n        }\n    };\n    Webcam.prototype.getScreenshot = function (screenshotDimensions) {\n        var _a = this, state = _a.state, props = _a.props;\n        if (!state.hasUserMedia)\n            return null;\n        var canvas = this.getCanvas(screenshotDimensions);\n        return (canvas &&\n            canvas.toDataURL(props.screenshotFormat, props.screenshotQuality));\n    };\n    Webcam.prototype.getCanvas = function (screenshotDimensions) {\n        var _a = this, state = _a.state, props = _a.props;\n        if (!this.video) {\n            return null;\n        }\n        if (!state.hasUserMedia || !this.video.videoHeight)\n            return null;\n        if (!this.ctx) {\n            var canvasWidth = this.video.videoWidth;\n            var canvasHeight = this.video.videoHeight;\n            if (!this.props.forceScreenshotSourceSize) {\n                var aspectRatio = canvasWidth / canvasHeight;\n                canvasWidth = props.minScreenshotWidth || this.video.clientWidth;\n                canvasHeight = canvasWidth / aspectRatio;\n                if (props.minScreenshotHeight &&\n                    canvasHeight < props.minScreenshotHeight) {\n                    canvasHeight = props.minScreenshotHeight;\n                    canvasWidth = canvasHeight * aspectRatio;\n                }\n            }\n            this.canvas = document.createElement(\"canvas\");\n            this.canvas.width = (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.width) || canvasWidth;\n            this.canvas.height = (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.height) || canvasHeight;\n            this.ctx = this.canvas.getContext(\"2d\");\n        }\n        var _b = this, ctx = _b.ctx, canvas = _b.canvas;\n        if (ctx && canvas) {\n            // adjust the height and width of the canvas to the given dimensions\n            canvas.width = (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.width) || canvas.width;\n            canvas.height = (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.height) || canvas.height;\n            // mirror the screenshot\n            if (props.mirrored) {\n                ctx.translate(canvas.width, 0);\n                ctx.scale(-1, 1);\n            }\n            ctx.imageSmoothingEnabled = props.imageSmoothing;\n            ctx.drawImage(this.video, 0, 0, (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.width) || canvas.width, (screenshotDimensions === null || screenshotDimensions === void 0 ? void 0 : screenshotDimensions.height) || canvas.height);\n            // invert mirroring\n            if (props.mirrored) {\n                ctx.scale(-1, 1);\n                ctx.translate(-canvas.width, 0);\n            }\n        }\n        return canvas;\n    };\n    Webcam.prototype.requestUserMedia = function () {\n        var _this = this;\n        var props = this.props;\n        var sourceSelected = function (audioConstraints, videoConstraints) {\n            var constraints = {\n                video: typeof videoConstraints !== \"undefined\" ? videoConstraints : true\n            };\n            if (props.audio) {\n                constraints.audio =\n                    typeof audioConstraints !== \"undefined\" ? audioConstraints : true;\n            }\n            _this.requestUserMediaId++;\n            var myRequestUserMediaId = _this.requestUserMediaId;\n            navigator.mediaDevices\n                .getUserMedia(constraints)\n                .then(function (stream) {\n                if (_this.unmounted || myRequestUserMediaId !== _this.requestUserMediaId) {\n                    Webcam.stopMediaStream(stream);\n                }\n                else {\n                    _this.handleUserMedia(null, stream);\n                }\n            })\n                .catch(function (e) {\n                _this.handleUserMedia(e);\n            });\n        };\n        if (\"mediaDevices\" in navigator) {\n            sourceSelected(props.audioConstraints, props.videoConstraints);\n        }\n        else {\n            var optionalSource_1 = function (id) { return ({ optional: [{ sourceId: id }] }); };\n            var constraintToSourceId_1 = function (constraint) {\n                var deviceId = constraint.deviceId;\n                if (typeof deviceId === \"string\") {\n                    return deviceId;\n                }\n                if (Array.isArray(deviceId) && deviceId.length > 0) {\n                    return deviceId[0];\n                }\n                if (typeof deviceId === \"object\" && deviceId.ideal) {\n                    return deviceId.ideal;\n                }\n                return null;\n            };\n            // @ts-ignore: deprecated api\n            MediaStreamTrack.getSources(function (sources) {\n                var audioSource = null;\n                var videoSource = null;\n                sources.forEach(function (source) {\n                    if (source.kind === \"audio\") {\n                        audioSource = source.id;\n                    }\n                    else if (source.kind === \"video\") {\n                        videoSource = source.id;\n                    }\n                });\n                var audioSourceId = constraintToSourceId_1(props.audioConstraints);\n                if (audioSourceId) {\n                    audioSource = audioSourceId;\n                }\n                var videoSourceId = constraintToSourceId_1(props.videoConstraints);\n                if (videoSourceId) {\n                    videoSource = videoSourceId;\n                }\n                sourceSelected(optionalSource_1(audioSource), optionalSource_1(videoSource));\n            });\n        }\n    };\n    Webcam.prototype.handleUserMedia = function (err, stream) {\n        var props = this.props;\n        if (err || !stream) {\n            this.setState({ hasUserMedia: false });\n            props.onUserMediaError(err);\n            return;\n        }\n        this.stream = stream;\n        try {\n            if (this.video) {\n                this.video.srcObject = stream;\n            }\n            this.setState({ hasUserMedia: true });\n        }\n        catch (error) {\n            this.setState({\n                hasUserMedia: true,\n                src: window.URL.createObjectURL(stream)\n            });\n        }\n        props.onUserMedia(stream);\n    };\n    Webcam.prototype.render = function () {\n        var _this = this;\n        var _a = this, state = _a.state, props = _a.props;\n        var audio = props.audio, forceScreenshotSourceSize = props.forceScreenshotSourceSize, onUserMedia = props.onUserMedia, onUserMediaError = props.onUserMediaError, screenshotFormat = props.screenshotFormat, screenshotQuality = props.screenshotQuality, minScreenshotWidth = props.minScreenshotWidth, minScreenshotHeight = props.minScreenshotHeight, audioConstraints = props.audioConstraints, videoConstraints = props.videoConstraints, imageSmoothing = props.imageSmoothing, mirrored = props.mirrored, _b = props.style, style = _b === void 0 ? {} : _b, children = props.children, rest = __rest(props, [\"audio\", \"forceScreenshotSourceSize\", \"onUserMedia\", \"onUserMediaError\", \"screenshotFormat\", \"screenshotQuality\", \"minScreenshotWidth\", \"minScreenshotHeight\", \"audioConstraints\", \"videoConstraints\", \"imageSmoothing\", \"mirrored\", \"style\", \"children\"]);\n        var videoStyle = mirrored ? __assign(__assign({}, style), { transform: (style.transform || \"\") + \" scaleX(-1)\" }) : style;\n        var childrenProps = {\n            getScreenshot: this.getScreenshot.bind(this),\n        };\n        return (react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], null,\n            react__WEBPACK_IMPORTED_MODULE_0__[\"createElement\"](\"video\", __assign({ autoPlay: true, src: state.src, muted: !audio, playsInline: true, ref: function (ref) {\n                    _this.video = ref;\n                }, style: videoStyle }, rest)),\n            children && children(childrenProps)));\n    };\n    Webcam.defaultProps = {\n        audio: false,\n        forceScreenshotSourceSize: false,\n        imageSmoothing: true,\n        mirrored: false,\n        onUserMedia: function () { return undefined; },\n        onUserMediaError: function () { return undefined; },\n        screenshotFormat: \"image/webp\",\n        screenshotQuality: 0.92,\n    };\n    return Webcam;\n}(react__WEBPACK_IMPORTED_MODULE_0__[\"Component\"]));\n/* harmony default export */ __webpack_exports__[\"default\"] = (Webcam);\n\n\n/***/ }),\n\n/***/ \"react\":\n/*!**************************************************************************************!*\\\n  !*** external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"} ***!\n  \\**************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_react__;\n\n/***/ })\n\n/******/ })[\"default\"];\n});\n//# sourceMappingURL=react-webcam.js.map","exports.getMatches = (query) => {\n  // Prevents SSR issues\n  if (typeof window !== 'undefined') {\n    return window.matchMedia(query).matches;\n  }\n\n  return false;\n};\n","exports.getMatches = require('./get-matches').getMatches;\n","const { useState, useLayoutEffect, useEffect } = require('react');\nconst { getMatches } = require('../get-matches');\n\nconst isBrowser = typeof window !== 'undefined';\nconst useEnhancedEffect = isBrowser ? useLayoutEffect : useEffect;\n\nconst useMediaQuery = (query = '') => {\n  const [isMatch, setIsMatch] = useState(getMatches(query));\n\n  useEnhancedEffect(() => {\n    let mounted = true;\n    const mediaQueryList = window.matchMedia(query.replace(/^@media\\s*/, ''));\n    const handleChange = () => {\n      if (!mounted) return;\n\n      setIsMatch(mediaQueryList.matches);\n    };\n\n    // Safari < 14 can't use addEventListener on a MediaQueryList\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList#Browser_compatibility\n    if (mediaQueryList.addListener) {\n      mediaQueryList.addListener(handleChange);\n    } else {\n      mediaQueryList.addEventListener('change', handleChange);\n    }\n\n    setIsMatch(mediaQueryList.matches);\n\n    return () => {\n      mounted = false;\n\n      if (mediaQueryList.addListener) {\n        mediaQueryList.removeListener(handleChange);\n      } else {\n        mediaQueryList.removeEventListener('change', handleChange);\n      }\n    };\n  }, [query]);\n\n  return isMatch;\n};\n\nexports.useMediaQuery = useMediaQuery;\n","exports.useMediaQuery = require('./use-media-query').useMediaQuery;\n","exports.useMediaQuery = require('./use-media-query').useMediaQuery;\n","import { useMediaQuery } from \"styled-breakpoints/use-media-query\";\nimport { useTheme } from \"styled-components\";\nimport { ActiveBreakpoints } from \"./ActiveBreakpoints.types\";\n\nexport const useActiveBreakpoints = (): ActiveBreakpoints => {\n\n    let isXs = false\n    let isSm = false\n    let isMd = false\n    let isLg = false\n    let isXl = false\n    let isXxl = false\n\n    // determine screen size\n    const theme = useTheme()\n    if(theme?.breakpoints){\n        isXs = useMediaQuery(theme.breakpoints.only(\"xs\"))\n        isSm = useMediaQuery(theme.breakpoints.only(\"sm\"))\n        isMd = useMediaQuery(theme.breakpoints.only(\"md\"))\n        isLg = useMediaQuery(theme.breakpoints.only(\"lg\"))\n        isXl = useMediaQuery(theme.breakpoints.only(\"xl\"))\n        isXxl = useMediaQuery(theme.breakpoints.only(\"xxl\"))\n    }\n\n    return {\n        isXs,\n        isSm,\n        isMd,\n        isLg,\n        isXl,\n        isXxl\n    }\n}","import { ForwardedRef, useEffect, useRef } from \"react\";\n\nexport const useForwardRef = <T,>(\n    ref: ForwardedRef<T>,\n    initialValue: any = null\n) => {\n    const targetRef = useRef<T>(initialValue)\n\n    useEffect(() => {\n        if (!ref) return\n        if (typeof ref === 'function') {\n            ref(targetRef.current)\n        } else {\n            ref.current = targetRef.current\n        }\n    }, [ref])\n\n    return targetRef\n}","interface CallbackRecord {\n    isRunning: boolean\n    callback: (...args: any) => Promise<void>\n}\n\nconst setIntervalWithPromise = (callback: (...args: any[]) => Promise<void>) => {\n    let callbackRecord: CallbackRecord = {\n        isRunning: false,\n        callback: callback\n    }\n\n    return async function (...args: any[]) {\n        if (callbackRecord.isRunning) return\n        callbackRecord.isRunning = true\n        await callbackRecord.callback(...args)\n        callbackRecord.isRunning = false\n    }\n}\n\nexport const asyncSetInterval = (asyncFunction: any, intervalMs: number): NodeJS.Timeout => {\n    return setInterval(setIntervalWithPromise(asyncFunction), intervalMs);\n}","export const FACING_MODE_USER = \"user\"\nexport const FACING_MODE_ENVIRONMENT = \"environment\"\nexport const VIDEO_INPUT = \"videoinput\"\n\nexport interface VideoInput {\n    inputDeviceInfo: InputDeviceInfo\n    mediaTrackCapabilities: MediaTrackCapabilities\n}\n\nexport interface VideoInputMode {\n    deviceId: string\n    label: string\n    facingMode: string\n    aspectRatio?: DoubleRange\n    width?: ULongRange\n    height?: ULongRange\n}","import {\n    FACING_MODE_USER,\n    VIDEO_INPUT,\n    VideoInput,\n    VideoInputMode\n} from \"./mediaDeviceService.types\";\n\nexport const getVideoInputs = async (): Promise<VideoInput[]> => {\n    // get all video input devices\n    let videoInputDevices: InputDeviceInfo[] = []\n    let mediaDevices = await navigator.mediaDevices.enumerateDevices()\n    mediaDevices.forEach((mediaDevice: MediaDeviceInfo) => {\n        if (mediaDevice.kind !== VIDEO_INPUT) return\n        const inputDevice = mediaDevice as InputDeviceInfo\n        if (!inputDevice) return\n        videoInputDevices.push(inputDevice)\n    })\n\n    // get all media track capabilities from video input devices\n    let videoInputs: VideoInput[] = []\n    videoInputDevices.forEach((videoInputDevice) => {\n        const mediaTrackCapabilities = videoInputDevice.getCapabilities()\n        const videoInput: VideoInput = {\n            inputDeviceInfo: videoInputDevice,\n            mediaTrackCapabilities: mediaTrackCapabilities\n        }\n        videoInputs.push(videoInput)\n    })\n\n    console.log('video inputs', videoInputs)\n    return videoInputs\n}\n\nexport const getVideoInputModes = async () => {\n    const videoInputModes: VideoInputMode[] = []\n    const videoInputs = await getVideoInputs()\n\n    videoInputs.forEach((videoInput: VideoInput) => {\n        const inputDeviceInfo= videoInput.inputDeviceInfo\n        const mediaTrackCapabilities= videoInput.mediaTrackCapabilities\n\n        // if there are facing modes\n        const facingModes = mediaTrackCapabilities.facingMode\n        if (facingModes && facingModes.length) {\n            // add each facing mode separately\n            facingModes.forEach((facingMode) => {\n                const videoInputMode: VideoInputMode = {\n                    deviceId: inputDeviceInfo.deviceId,\n                    facingMode: facingMode,\n                    label: inputDeviceInfo.label,\n                    aspectRatio: mediaTrackCapabilities.aspectRatio,\n                    width: mediaTrackCapabilities.width,\n                    height: mediaTrackCapabilities.height\n\n                }\n                videoInputModes.push(videoInputMode)\n            })\n        } else {\n            // add default mode\n            const videoInputMode: VideoInputMode = {\n                deviceId: videoInput.inputDeviceInfo.deviceId,\n                facingMode: FACING_MODE_USER,\n                label: videoInput.inputDeviceInfo.label,\n                aspectRatio: mediaTrackCapabilities.aspectRatio,\n                width: mediaTrackCapabilities.width,\n                height: mediaTrackCapabilities.height\n            }\n            videoInputModes.push(videoInputMode)\n        }\n    })\n\n    return videoInputModes\n}","import { useEffect, useState, forwardRef } from \"react\";\nimport Webcam from \"react-webcam\";\nimport styled from \"styled-components\"\nimport { Button } from \"gle-components\";\nimport { useActiveBreakpoints, useForwardRef } from \"../../hooks/\";\nimport { asyncSetInterval } from \"../../services/async/asyncService\";\nimport { FACING_MODE_USER, VideoInputMode } from \"../../services/mediaDevice/mediaDeviceService.types\";\nimport { getVideoInputModes } from \"../../services/mediaDevice/mediaDeviceService\";\nimport { RoboflowWebcamProps } from \"./RoboflowWebcam.types\";\n\nconst RoboflowWebcamContent = styled.div`\n  position: relative;\n  padding: 1rem;\n  margin-bottom: 1rem;\n  background-color: #1D1E20;\n  border-radius: 4px;\n`\n\nconst RoboflowWebcamToolbar = styled.div`\n  margin-bottom: 10px;\n`\n\nconst RoboflowWebcamVideoContent = styled.div`\n  position: relative;\n`\n\nconst RoboflowWebcamWebcam = styled(Webcam)`\n  position: relative;\n  top: 0;\n  left: 0;\n`\n\nconst RoboflowWebcamButton = styled(Button)`\n  float: right;\n`\n\nconst RoboflowWebcamLabel = styled.span`\n  font-size: 12px;\n  line-height: 1;\n`\n\nexport const RoboflowWebcam = forwardRef<Webcam, RoboflowWebcamProps>((\n    {\n        children,\n        onInitialized,\n        onSizeChange\n    }, ref) => {\n    const webcamRef = useForwardRef<Webcam>(ref)\n    const [videoInitialized, setVideoInitialized] = useState<boolean>(false)\n    const [videoInputModes, setVideoInputModes] = useState<VideoInputMode[]>([])\n    const [videoInputMode, setVideoInputMode] = useState<VideoInputMode | null>(null)\n\n    // determine screen size\n    const {isXs, isSm, isMd, isLg, isXl, isXxl} = useActiveBreakpoints()\n\n    // determine optimal video constraints dimensions\n    let constraintWidth = 640\n    let constraintHeight = 480\n\n    if (isXs || isSm) {\n        constraintWidth = 320\n        constraintHeight = 240\n    } else if (isMd || isLg) {\n        constraintWidth = 576\n        constraintHeight = 432\n    } else if (isXl || isXxl) {\n        constraintWidth = 640\n        constraintHeight = 480\n    }\n\n    // video constraints based on current video input mode\n    let videoConstraints: MediaTrackConstraints = {\n        facingMode: FACING_MODE_USER,\n        width: {max: constraintWidth},\n        height: {max: constraintHeight}\n    }\n\n    if (videoInputMode) {\n        videoConstraints.deviceId = videoInputMode.deviceId\n        videoConstraints.facingMode = videoInputMode.facingMode\n    }\n\n    // count of available video input modes\n    let videoInputModeCount = videoInputModes.length\n\n    const initializeVideo = () => {\n\n        let initializingVideo = false\n\n        let initializeInterval = asyncSetInterval(async () => {\n            const webcam = webcamRef?.current\n            if (!webcam) return\n\n            const video = webcam?.video\n            if (!video) return\n\n            // check data is available\n            if (video.readyState !== 4) return\n\n            // return if already initialized\n            if (videoInitialized) return\n\n            // return if initializing\n            if (!initializingVideo) {\n                console.log(\"initializing video\")\n                initializingVideo = true\n\n                // get all video input devices\n                const allVideoInputModes = await getVideoInputModes()\n\n                // default to first video input mode\n                const defaultVideoInputMode = allVideoInputModes[0]\n\n                // set all video input modes\n                console.log(\"initializing video input modes\", allVideoInputModes)\n                setVideoInputModes(allVideoInputModes)\n\n                // set the default video input mode\n                console.log(\"initializing default video input mode\", defaultVideoInputMode)\n                setVideoInputMode(defaultVideoInputMode)\n\n                // set video input modes initialized\n                console.log(\"initialized video\")\n                setVideoInitialized(true)\n                onInitialized?.()\n            }\n\n            // done initializing\n            clearInterval(initializeInterval)\n\n        }, 100);\n    }\n\n    const detect = async () => {\n        const webcam = webcamRef?.current\n        if (!webcam) return\n\n        const video = webcam?.video\n        if (!video) return\n\n        // check data is available\n        if (video.readyState !== 4) return\n\n        const videoWidth = video.videoWidth\n        const videoHeight = video.videoHeight\n\n        if (video.width !== videoWidth || video.height !== videoHeight) {\n            video.width = videoWidth\n            video.height = videoHeight\n            onSizeChange?.(videoWidth, videoHeight)\n        }\n    }\n\n    const toggleVideoMode = () => {\n        if (!videoInputModes) return\n        if (!videoInputMode) return\n        const videoInputModeIndex = videoInputModes.indexOf(videoInputMode)\n        let nextVideoInputModeIndex = videoInputModeIndex + 1\n        if (nextVideoInputModeIndex >= videoInputModes.length) {\n            nextVideoInputModeIndex = 0\n        }\n        const nextVideoInputMode = videoInputModes.at(nextVideoInputModeIndex)\n        if (!nextVideoInputMode) return;\n        setVideoInputMode(nextVideoInputMode)\n    }\n\n    const handleSwitchVideoModeClick = () => {\n        toggleVideoMode()\n    }\n\n    useEffect(() => {\n        if (!videoInitialized) {\n            // initialize\n            initializeVideo()\n        } else {\n            let detectInterval = asyncSetInterval(async () => {\n                await detect()\n            }, 10)\n        }\n    }, [videoInitialized])\n\n    return (\n        <RoboflowWebcamContent>\n            <RoboflowWebcamToolbar>\n                {videoInputMode &&\n                    <RoboflowWebcamLabel>\n                        {videoInputMode.label}\n                    </RoboflowWebcamLabel>}\n                {videoInputModeCount > 1 &&\n                    <RoboflowWebcamButton\n                        variant={\"small\"}\n                        primary={true}\n                        onClick={handleSwitchVideoModeClick}>\n                        Switch camera\n                    </RoboflowWebcamButton>}\n            </RoboflowWebcamToolbar>\n            <RoboflowWebcamVideoContent>\n                <RoboflowWebcamWebcam\n                    ref={webcamRef}\n                    muted={true}\n                    width={constraintWidth}\n                    height={constraintHeight}\n                    videoConstraints={videoConstraints}\n                />\n                {children}\n            </RoboflowWebcamVideoContent>\n        </RoboflowWebcamContent>\n    )\n})\n"],"names":["root","factory","module","require$$0","this","__WEBPACK_EXTERNAL_MODULE_react__","modules","installedModules","__webpack_require__","moduleId","exports","name","getter","value","mode","ns","key","object","property","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","__extends","extendStatics","b","d","p","__","__assign","t","s","i","n","__rest","e","constraints","getUserMedia","resolve","reject","hasGetUserMedia","Webcam","_super","props","_this","_a","state","nextProps","audioConstraintsChanged","videoConstraintsChanged","minScreenshotWidthChanged","minScreenshotHeightChanged","stream","track","screenshotDimensions","canvas","canvasWidth","canvasHeight","aspectRatio","_b","ctx","sourceSelected","audioConstraints","videoConstraints","myRequestUserMediaId","optionalSource_1","id","constraintToSourceId_1","constraint","deviceId","sources","audioSource","videoSource","source","audioSourceId","videoSourceId","err","audio","mirrored","style","children","rest","videoStyle","childrenProps","ref","getMatches","query","useState","useLayoutEffect","useEffect","require$$1","isBrowser","useEnhancedEffect","useMediaQuery","isMatch","setIsMatch","mounted","mediaQueryList","handleChange","useMediaQuery_1","useActiveBreakpoints","isXs","isSm","isMd","isLg","isXl","isXxl","theme","useTheme","useForwardRef","initialValue","targetRef","useRef","setIntervalWithPromise","callback","callbackRecord","args","asyncSetInterval","asyncFunction","intervalMs","FACING_MODE_USER","VIDEO_INPUT","getVideoInputs","videoInputDevices","mediaDevice","inputDevice","videoInputs","videoInputDevice","mediaTrackCapabilities","videoInput","getVideoInputModes","videoInputModes","inputDeviceInfo","facingModes","facingMode","videoInputMode","RoboflowWebcamContent","styled","RoboflowWebcamToolbar","RoboflowWebcamVideoContent","RoboflowWebcamWebcam","RoboflowWebcamButton","Button","RoboflowWebcamLabel","RoboflowWebcam","forwardRef","onInitialized","onSizeChange","webcamRef","videoInitialized","setVideoInitialized","setVideoInputModes","setVideoInputMode","constraintWidth","constraintHeight","videoInputModeCount","initializeVideo","initializingVideo","initializeInterval","webcam","video","allVideoInputModes","defaultVideoInputMode","detect","videoWidth","videoHeight","toggleVideoMode","nextVideoInputModeIndex","nextVideoInputMode","handleSwitchVideoModeClick","jsxs","jsx"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}